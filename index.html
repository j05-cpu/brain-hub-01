```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Are You Smarter Than AI?</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: #0f0f1a;
    color: #e0e0e0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
  }
  .container { width: 100%; max-width: 600px; }
  .screen { display: none; }
  .screen.active { display: block; }

  /* Streak Bar */
  .streak-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    background: #1a1a2e;
    border: 1px solid #2d2d4e;
    border-radius: 50px;
    padding: 10px 22px;
    margin-bottom: 24px;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
  }
  .streak-flame { font-size: 1.3rem; animation: flicker 1.4s ease-in-out infinite alternate; }
  @keyframes flicker {
    0%   { transform: scale(1)    rotate(-3deg); }
    50%  { transform: scale(1.12) rotate(2deg);  }
    100% { transform: scale(1.05) rotate(-1deg); }
  }
  .streak-text { font-size: 0.95rem; color: #aaa; }
  .streak-count {
    font-size: 1.05rem;
    font-weight: 800;
    color: #fb923c;
    background: #fb923c18;
    border: 1px solid #fb923c44;
    border-radius: 20px;
    padding: 2px 12px;
    min-width: 36px;
    text-align: center;
  }
  .streak-count.streak-new {
    color: #fde047;
    border-color: #fde04766;
    background: #fde04718;
    animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  @keyframes pop {
    0%   { transform: scale(0.7); opacity: 0.5; }
    100% { transform: scale(1);   opacity: 1;   }
  }

  h1 { text-align: center; font-size: 2rem; color: #a78bfa; margin-bottom: 8px; }
  .subtitle { text-align: center; color: #888; margin-bottom: 32px; font-size: 0.95rem; }

  .btn {
    display: block; width: 100%; padding: 14px;
    background: #7c3aed; color: #fff; border: none;
    border-radius: 10px; font-size: 1.1rem; cursor: pointer;
    transition: background 0.2s, transform 0.1s; margin-top: 12px;
  }
  .btn:hover { background: #6d28d9; }
  .btn:active { transform: scale(0.98); }
  .btn.outline { background: transparent; border: 2px solid #7c3aed; color: #a78bfa; }
  .btn.outline:hover { background: #1a1a2e; }
  .btn.share-btn {
    background: linear-gradient(135deg, #0ea5e9, #6366f1);
    display: flex; align-items: center; justify-content: center; gap: 10px;
    font-size: 1.05rem; font-weight: 700; letter-spacing: 0.02em;
  }
  .btn.share-btn:hover { background: linear-gradient(135deg, #0284c7, #4f46e5); }
  .btn.share-btn.copied { background: linear-gradient(135deg, #059669, #0d9488); }
  .share-icon { font-size: 1.2rem; line-height: 1; }

  /* Quiz HUD */
  .hud { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  .q-counter { color: #888; font-size: 0.9rem; }
  .score-display { color: #a78bfa; font-weight: bold; }
  .timer-wrap { display: flex; align-items: center; gap: 8px; }
  #timer { font-size: 1.4rem; font-weight: bold; color: #34d399; min-width: 36px; text-align: right; transition: color 0.3s; }
  #timer.danger { color: #f87171; }
  .timer-label { color: #888; font-size: 0.85rem; }

  .progress-bar { height: 4px; background: #1e1e30; border-radius: 4px; margin-bottom: 24px; overflow: hidden; }
  .progress-fill { height: 100%; background: #7c3aed; transition: width 0.4s ease; }

  .question-card { background: #1a1a2e; border: 1px solid #2d2d4e; border-radius: 14px; padding: 24px; margin-bottom: 20px; }
  .question-text { font-size: 1.15rem; line-height: 1.6; color: #e0e0e0; }

  .choices { display: flex; flex-direction: column; gap: 10px; }
  .choice-btn {
    background: #1a1a2e; border: 2px solid #2d2d4e; color: #e0e0e0;
    border-radius: 10px; padding: 14px 18px; font-size: 1rem;
    cursor: pointer; text-align: left; transition: border-color 0.2s, background 0.2s;
  }
  .choice-btn:hover:not(:disabled) { border-color: #7c3aed; background: #22223a; }
  .choice-btn.correct { border-color: #34d399; background: #064e3b22; color: #34d399; }
  .choice-btn.wrong   { border-color: #f87171; background: #7f1d1d22; color: #f87171; }
  .choice-btn:disabled { cursor: default; }

  .feedback { text-align: center; font-size: 1rem; min-height: 28px; margin-top: 12px; font-weight: 600; }
  .feedback.correct { color: #34d399; }
  .feedback.wrong   { color: #f87171; }

  /* Result Screen */
  .result-card {
    background: #1a1a2e; border: 1px solid #2d2d4e;
    border-radius: 14px; padding: 32px 24px 28px;
    text-align: center; margin-bottom: 16px;
  }

  /* Streak milestone toast inside result */
  .streak-milestone {
    display: none;
    align-items: center; justify-content: center; gap-8px;
    background: linear-gradient(135deg, #78350f44, #92400e44);
    border: 1px solid #fb923c66;
    border-radius: 10px;
    padding: 10px 16px;
    margin-bottom: 18px;
    font-size: 0.9rem;
    color: #fb923c;
    font-weight: 600;
    gap: 8px;
  }
  .streak-milestone.show { display: flex; }

  .perf-tier {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 22px; border-radius: 50px;
    font-size: 1rem; font-weight: 700; letter-spacing: 0.04em;
    margin-bottom: 18px; border: 2px solid;
  }
  .tier-5 { background: #fef08a18; color: #fde047; border-color: #fde047; }
  .tier-4 { background: #a78bfa18; color: #a78bfa; border-color: #a78bfa; }
  .tier-3 { background: #34d39918; color: #34d399; border-color: #34d399; }
  .tier-2 { background: #60a5fa18; color: #60a5fa; border-color: #60a5fa; }
  .tier-1 { background: #f8717118; color: #f87171; border-color: #f87171; }

  .result-emoji { font-size: 3.2rem; margin-bottom: 10px; }
  .result-title { font-size: 1.5rem; color: #a78bfa; margin-bottom: 18px; }

  .verdict-banner {
    display: inline-block; padding: 10px 28px; border-radius: 50px;
    font-size: 1.05rem; font-weight: 700; margin-bottom: 26px; letter-spacing: 0.03em;
  }
  .verdict-win  { background: #064e3b44; color: #34d399; border: 2px solid #34d399; }
  .verdict-tie  { background: #1e3a5f44; color: #60a5fa; border: 2px solid #60a5fa; }
  .verdict-lose { background: #7f1d1d44; color: #f87171; border: 2px solid #f87171; }

  .score-comparison {
    display: flex; justify-content: center; align-items: stretch;
    margin-bottom: 22px; border-radius: 12px;
    overflow: hidden; border: 1px solid #2d2d4e;
  }
  .score-side {
    flex: 1; padding: 20px 12px;
    display: flex; flex-direction: column; align-items: center; gap: 8px;
  }
  .score-side.ai-side   { background: #12122a; border-right: 1px solid #2d2d4e; }
  .score-side.user-side { background: #12122a; }
  .score-side .avatar   { font-size: 2rem; }
  .score-side .label    { font-size: 0.8rem; color: #888; text-transform: uppercase; letter-spacing: 0.08em; }
  .score-side .big-score { font-size: 2.8rem; font-weight: 800; line-height: 1; }
  .score-side .fraction  { font-size: 0.85rem; color: #666; }
  .ai-side   .big-score { color: #f87171; }
  .user-side .big-score { color: #34d399; }

  .vs-divider {
    display: flex; align-items: center; justify-content: center;
    background: #0f0f1a; padding: 0 4px; font-size: 0.75rem;
    font-weight: 700; color: #555; letter-spacing: 0.05em; min-width: 32px;
    border-left: 1px solid #2d2d4e; border-right: 1px solid #2d2d4e;
  }

  .bar-wrap { width: 100%; padding: 0 24px; margin-bottom: 10px; }
  .bar-row  { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
  .bar-row-label { font-size: 0.78rem; color: #888; width: 32px; text-align: right; flex-shrink: 0; }
  .bar-track { flex: 1; height: 10px; background: #1e1e30; border-radius: 6px; overflow: hidden; }
  .bar-fill  { height: 100%; border-radius: 6px; transition: width 1s ease; width: 0; }
  .bar-fill.ai-bar   { background: #f87171; }
  .bar-fill.user-bar { background: #34d399; }
  .bar-score-label   { font-size: 0.78rem; font-weight: 700; width: 28px; flex-shrink: 0; }
  .bar-score-label.ai-label   { color: #f87171; }
  .bar-score-label.user-label { color: #34d399; }

  .result-verdict { color: #aaa; font-size: 0.9rem; line-height: 1.6; padding: 0 8px; }

  /* Start screen */
  .start-icon { font-size: 3rem; text-align: center; margin-bottom: 16px; }
  .features { list-style: none; color: #888; font-size: 0.9rem; margin-bottom: 28px; text-align: center; line-height: 2; }
</style>
</head>
<body>
<div class="container">

  <!-- Streak Bar (always visible) -->
  <div class="streak-bar" id="streak-bar">
    <span class="streak-flame">üî•</span>
    <span class="streak-text">Current Streak:</span>
    <span class="streak-count" id="streak-count">1</span>
    <span class="streak-text">Days</span>
  </div>

  <!-- Start Screen -->
  <div class="screen active" id="start-screen">
    <div class="start-icon">üß†</div>
    <h1>Are You Smarter Than AI?</h1>
    <p class="subtitle">5 tricky logic &amp; maths questions. Think fast!</p>
    <ul class="features">
      <li>‚è± 30 seconds per question</li>
      <li>üî¢ 5 brain-bending questions</li>
      <li>üèÜ Score tracked in real time</li>
    </ul>
    <button class="btn" id="start-btn">Start Quiz</button>
  </div>

  <!-- Quiz Screen -->
  <div class="screen" id="quiz-screen">
    <div class="hud">
      <span class="q-counter" id="q-counter">Question 1 of 5</span>
      <div class="timer-wrap">
        <span class="timer-label">‚è±</span>
        <span id="timer">30</span>
      </div>
      <span class="score-display" id="score-display">Score: 0</span>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div class="question-card">
      <p class="question-text" id="question-text"></p>
    </div>
    <div class="choices" id="choices"></div>
    <p class="feedback" id="feedback"></p>
  </div>

  <!-- Result Screen -->
  <div class="screen" id="result-screen">
    <div class="result-card">
      <div class="streak-milestone" id="streak-milestone"></div>
      <div class="perf-tier" id="perf-tier"></div>
      <div class="result-emoji" id="result-emoji"></div>
      <div class="result-title" id="result-title"></div>
      <div class="verdict-banner" id="verdict-banner"></div>

      <div class="score-comparison">
        <div class="score-side ai-side">
          <span class="avatar">ü§ñ</span>
          <span class="label">AI</span>
          <span class="big-score" id="ai-big-score">0</span>
          <span class="fraction">out of 5</span>
        </div>
        <div class="vs-divider">VS</div>
        <div class="score-side user-side">
          <span class="avatar">üß†</span>
          <span class="label">You</span>
          <span class="big-score" id="user-big-score">0</span>
          <span class="fraction">out of 5</span>
        </div>
      </div>

      <div class="bar-wrap">
        <div class="bar-row">
          <span class="bar-row-label">ü§ñ</span>
          <div class="bar-track"><div class="bar-fill ai-bar" id="ai-bar"></div></div>
          <span class="bar-score-label ai-label" id="ai-bar-label"></span>
        </div>
        <div class="bar-row">
          <span class="bar-row-label">üß†</span>
          <div class="bar-track"><div class="bar-fill user-bar" id="user-bar"></div></div>
          <span class="bar-score-label user-label" id="user-bar-label"></span>
        </div>
      </div>

      <p class="result-verdict" id="result-verdict"></p>
    </div>

    <button class="btn share-btn" id="share-btn">
      <span class="share-icon">üì§</span>
      <span id="share-btn-text">Share Your Score</span>
    </button>
    <button class="btn" id="restart-btn">Play Again</button>
    <button class="btn outline" id="home-btn">Back to Home</button>
  </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function () {

  /* ‚îÄ‚îÄ Streak Logic ‚îÄ‚îÄ */
  const STREAK_KEY     = 'aysai_streak';
  const LAST_PLAYED_KEY = 'aysai_last_played';

  function getTodayStr() {
    const d = new Date();
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
  }

  function getDaysBetween(dateStrA, dateStrB) {
    const a = new Date(dateStrA);
    const b = new Date(dateStrB);
    return Math.round((b - a) / (1000 * 60 * 60 * 24));
  }

  function loadStreak() {
    return parseInt(localStorage.getItem(STREAK_KEY) || '0', 10);
  }

  function saveStreak(val) {
    localStorage.setItem(STREAK_KEY, String(val));
  }

  function getLastPlayed() {
    return localStorage.getItem(LAST_PLAYED_KEY) || null;
  }

  function saveLastPlayed(dateStr) {
    localStorage.setItem(LAST_PLAYED_KEY, dateStr);
  }

  // Calculate and update streak when a game finishes. Returns {streak, isNew, wasReset}
  function updateStreak() {
    const today      = getTodayStr();
    const lastPlayed = getLastPlayed();
    let streak       = loadStreak();
    let isNew        = false;
    let wasReset     = false;

    if (!lastPlayed) {
      // First time ever
      streak  = 1;
      isNew   = true;
    } else if (lastPlayed === today) {
      // Already played today ‚Äî don't change streak
    } else {
      const diff = getDaysBetween(lastPlayed, today);
      if (diff === 1) {
        // Consecutive day
        streak++;
        isNew = true;
      } else {
        // Missed one or more days
        streak   = 1;
        wasReset = true;
      }
    }

    saveStreak(streak);
    saveLastPlayed(today);
    renderStreakBar(streak, isNew);
    return { streak, isNew, wasReset };
  }

  function renderStreakBar(streak, highlight) {
    const countEl = document.getElementById('streak-count');
    countEl.textContent = streak;
    countEl.className   = 'streak-count' + (highlight ? ' streak-new' : '');
    // Remove animation class after it plays so it can re-trigger
    if (highlight) {
      countEl.addEventListener('animationend', function () {
        countEl.classList.remove('streak-new');
      }, { once: true });
    }
  }

  // Init streak display on load (read-only, no update)
  (function initStreakDisplay() {
    const streak     = loadStreak();
    const lastPlayed = getLastPlayed();
    const today      = getTodayStr();
    let displayStreak = streak;

    if (lastPlayed && lastPlayed !== today) {
      const diff = getDaysBetween(lastPlayed, today);
      if (diff > 1) displayStreak = 0; // streak is broken, show 0 until they play
    }
    if (!lastPlayed) displayStreak = 0;

    document.getElementById('streak-count').textContent = displayStreak;
  })();

  /* ‚îÄ‚îÄ Questions ‚îÄ‚îÄ */
  const questions = [
    {
      q: "A bat and a ball cost $1.10 in total. The bat costs $1.00 more than the ball. How much does the ball cost?",
      choices: ["$0.10", "$0.05", "$0.15", "$0.20"],
      answer: 1,
      explain: "The ball costs $0.05. Bat = $1.05, Ball = $0.05. Total = $1.10 ‚úì"
    },
    {
      q: "If it takes 5 machines 5 minutes to make 5 widgets, how long does it take 100 machines to make 100 widgets?",
      choices: ["100 minutes", "50 minutes", "5 minutes", "1 minute"],
      answer: 2,
      explain: "Each machine makes 1 widget in 5 minutes. 100 machines make 100 widgets in 5 minutes."
    },
    {
      q: "In a lake, there's a patch of lily pads. Every day the patch doubles in size. If it takes 48 days to cover the whole lake, how long to cover half the lake?",
      choices: ["24 days", "36 days", "47 days", "12 days"],
      answer: 2,
      explain: "Since it doubles daily, half the lake was covered just one day before ‚Äî day 47."
    },
    {
      q: "What is the next number in this sequence? 1, 11, 21, 1211, 111221, ?",
      choices: ["222231", "312211", "1112221", "1234321"],
      answer: 1,
      explain: "This is the Look-and-Say sequence. Each term describes the previous: one 3, one 1, two 2s, two 1s ‚Üí 312211."
    },
    {
      q: "You have a 3-litre jug and a 5-litre jug. How do you measure exactly 4 litres of water?",
      choices: [
        "Fill the 5L, pour into 3L, empty 3L, pour remaining into 3L, fill 5L again, top up 3L",
        "Fill 3L, pour into 5L. Fill 3L again, pour into 5L (1L left). Empty 5L. Pour 1L in. Fill 3L, add to 5L ‚Üí 4L",
        "It's impossible with these two jugs",
        "Fill the 5L halfway"
      ],
      answer: 1,
      explain: "Fill 3L, pour into 5L. Fill 3L again, pour into 5L (1L remains). Empty 5L. Pour 1L in. Fill 3L and add ‚Üí 4L!"
    }
  ];

  const perfTiers = [
    { max: 1, icon: '‚òï', label: 'Needs More Coffee',       cls: 'tier-1' },
    { max: 2, icon: 'üß©', label: 'Average Brain',           cls: 'tier-2' },
    { max: 3, icon: '‚ö°', label: 'Sharp Mind',              cls: 'tier-3' },
    { max: 4, icon: 'üöÄ', label: 'Elite Thinker',           cls: 'tier-4' },
    { max: 5, icon: 'üëë', label: 'Human Superintelligence', cls: 'tier-5' }
  ];

  let currentQ = 0, score = 0, timer = null, timeLeft = 30, answered = false;
  let finalShareText = '';

  const screens = {
    start:  document.getElementById('start-screen'),
    quiz:   document.getElementById('quiz-screen'),
    result: document.getElementById('result-screen')
  };

  function showScreen(name) {
    Object.values(screens).forEach(s => s.classList.remove('active'));
    screens[name].classList.add('active');
  }

  document.getElementById('start-btn').addEventListener('click', startQuiz);
  document.getElementById('restart-btn').addEventListener('click', startQuiz);
  document.getElementById('home-btn').addEventListener('click', () => showScreen('start'));

  /* Share button */
  const shareBtn     = document.getElementById('share-btn');
  const shareBtnText = document.getElementById('share-btn-text');

  shareBtn.addEventListener('click', function () {
    if (navigator.share) {
      navigator.share({ title: 'Are You Smarter Than AI?', text: finalShareText }).catch(function () {});
    } else {
      navigator.clipboard.writeText(finalShareText).then(function () {
        shareBtnText.textContent = 'Score Copied!';
        shareBtn.classList.add('copied');
        shareBtn.querySelector('.share-icon').textContent = '‚úÖ';
        setTimeout(function () {
          shareBtnText.textContent = 'Share Your Score';
          shareBtn.classList.remove('copied');
          shareBtn.querySelector('.share-icon').textContent = 'üì§';
        }, 2500);
      }).catch(function () {
        alert('Score copied!\n\n' + finalShareText);
      });
    }
  });

  function startQuiz() {
    currentQ = 0; score = 0;
    showScreen('quiz');
    loadQuestion();
  }

  function loadQuestion() {
    answered = false;
    clearInterval(timer);
    timeLeft = 30;

    const q = questions[currentQ];
    document.getElementById('q-counter').textContent = `Question ${currentQ + 1} of ${questions.length}`;
    document.getElementById('score-display').textContent = `Score: ${score}`;
    document.getElementById('progress-fill').style.width = `${(currentQ / questions.length) * 100}%`;
    document.getElementById('question-text').textContent = q.q;
    document.getElementById('feedback').textContent = '';
    document.getElementById('feedback').className = 'feedback';

    const choicesEl = document.getElementById('choices');
    choicesEl.innerHTML = '';
    q.choices.forEach((c, i) => {
      const btn = document.createElement('button');
      btn.className = 'choice-btn';
      btn.textContent = c;
      btn.addEventListener('click', () => selectAnswer(i));
      choicesEl.appendChild(btn);
    });

    startTimer();
  }

  function startTimer() {
    const timerEl = document.getElementById('timer');
    timerEl.textContent = timeLeft;
    timerEl.className = timeLeft <= 10 ? 'danger' : '';
    timer = setInterval(() => {
      timeLeft--;
      timerEl.textContent = timeLeft;
      timerEl.className = timeLeft <= 10 ? 'danger' : '';
      if (timeLeft <= 0) { clearInterval(timer); if (!answered) timeUp(); }
   